/* Embedded reports styling */
.report-toolbar {
	width: 100%;
	margin-bottom: 8px;
}
.report-frame {
	width: 100%;
	max-width: 100%;
	height: 60vh;
	border: 0;
	background: #fff;
}
/* Stack toolbar and iframe vertically and stretch to container width */
.report-embed {
	display: flex;
	flex-direction: column;
	align-items: stretch;
	width: 100%;
	max-width: 100%;
}
/* Ensure override if .row sets horizontal flex */
.row.report-embed {
	flex-direction: column;
}
/* Profile divider styling */
.profile-divider {
	margin: 14px 0;
	border: none;
	border-top: 1px solid #eef2ff;
}
/* Nickname input styling */
.nickname-input {
	display: block;
	width: 100%;
	padding: 12px;
	margin-top: 6px;
	border-radius: 10px;
	border: 1px solid #e5e7eb;
}
/* Achievement section heading margin */
.h3-achievement {
	margin: 0 0 8px 0;
}
/* Extracted styles from morningsir.html */
.header-brand{font-size:18px}
.header-sub{font-size:13px;opacity:.8}
.header-logo{height:84px; display:block; width:auto; object-fit:contain}
.card--pad{padding:16px}
.h2--no-margin{margin:0 0 8px 0}
.p--no-margin{margin:0}
.row--mt{margin-top:14px}
.course-title{font-weight:800}
.row--mt-sm{margin-top:10px}
.summary--card{padding:16px;margin-top:16px}
.h3--no-margin{margin:0}
.grid--two{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.input-nick{display:block;width:100%;padding:12px;margin-top:6px;border-radius:10px;border:1px solid #e5e7eb}
.mistake-wrap{margin-top:8px}
.toast{position:fixed;left:50%;bottom:80px;transform:translateX(-50%);background:#111827;color:#fff;padding:10px 14px;border-radius:999px;box-shadow:0 10px 30px rgba(2,8,23,.08);z-index:99}

/* Core layout and component styles moved from morningsir.html */
.\:root, :root { /* CSS variables for dynamic layout measurements */
	--appbar-h: 56px; /* JS will overwrite after layout */
	--tabbar-h: 64px; /* JS will overwrite after layout */
}
.root{ --brand:#0A66FF; --ink:#0F172A; --muted:#64748B; --bg:#F8FAFC; --card:#FFFFFF; --accent:#111827; --radius:16px; --shadow:0 10px 30px rgba(2,8,23,.08); --background-opacity: 0.3; }
*{box-sizing:border-box}
html,body{height:100%}
/* Page background: use a fixed pseudo-element as a fallback for iOS Safari */
body{ margin:0; font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial; color:var(--ink); background: var(--bg); position:relative; }
body::before{ content:""; position:fixed; inset:0; background:url('../img/bg-airport.jpg') no-repeat center/cover; background-size:cover; z-index:-1; -webkit-transform:translateZ(0); transform:translateZ(0); }
.appbar{ position:sticky; top:0; display:flex; align-items:center; justify-content:center; font-weight:700; box-sizing:border-box;
	/* Transparent header so hero plane shows behind */
	background: transparent; color:#06337a;
	/* Fully respect top safe area inside the header */
	padding-top: constant(safe-area-inset-top);
	padding-top: env(safe-area-inset-top, 0px);
	height: calc(56px + constant(safe-area-inset-top));
	height: calc(56px + env(safe-area-inset-top, 0px));
}
.hero{
	/* Title plane background */
	background:#eaf3ff;
	/* Pull hero upward so its background starts at the top pixel (behind header) */
	margin-top: calc(-1 * var(--appbar-h));
	/* Keep hero content visually below header; appbar height already includes safe-area */
	padding-top: calc(var(--appbar-h) + 16px);
	/* Taller hero for long screens; fallback to vh for wide support */
	min-height: clamp(240px, 42vh, 520px);
	display:flex; align-items:center; padding-left:16px; padding-right:16px;
	color:#06337a; font-weight:600; border-bottom:1px solid #e2e8f0;
}

/* Arrange header logo and subtitle horizontally */
.hero > div{ display:flex; align-items:center; gap:14px; }

.header-sub{ font-size:26px; opacity:.8; }
.view{padding:16px} .card{background:rgba(255, 255, 255, var(--background-opacity)); border-radius:var(--radius); box-shadow:var(--shadow)}
.list{display:grid; gap:12px}
.course{ display:flex; gap:12px; align-items:center; padding:14px 16px; cursor:pointer; }
.course:hover{outline:2px solid #dbeafe}
.avatar{width:42px;height:42px;border-radius:12px;background:#e2e8f0;display:grid;place-items:center;font-weight:700;color:#334155}
.meta{flex:1} .title{font-weight:700} .sub{font-size:12px;color:var(--muted)}
.panel{display:none} .panel.active{display:block}
.flashcard-wrap{position:relative; margin-top:10px}
.progress{height:4px;background:#e5e7eb;border-radius:999px;overflow:hidden}
.progress>div{height:100%;width:0%;background:linear-gradient(90deg,#60a5fa,#2563eb)}
.flashcard{margin-top:12px;padding:22px;min-height:200px;display:flex;flex-direction:column;gap:14px;justify-content:center;border-radius:20px;background:rgba(255,255,255,var(--background-opacity));box-shadow:var(--shadow);touch-action:pan-y}
.flashcard{transition:transform 320ms cubic-bezier(.2,.9,.2,1), opacity 280ms ease; will-change: transform, opacity}
.flashcard.animating{pointer-events:none}
.flashcard.swipe-left{transform:translateX(-110%) rotate(-8deg);opacity:0}
.flashcard.swipe-right{transform:translateX(110%) rotate(8deg);opacity:0}
.flashcard .en{font-size:22px;font-weight:800;letter-spacing:.2px}
.flashcard .zh{font-size:16px;color:var(--muted)}
.pill{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;border:1px solid #e5e7eb;background:rgba(255,255,255,var(--background-opacity))}
.toolbar{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
.btn{appearance:none;border:none;border-radius:12px;padding:14px 16px;font-weight:700;cursor:pointer}
.btn.primary{background:var(--accent);color:#fff}
.btn.secondary{background:#fff;border:1px solid #e5e7eb;color:var(--ink);}
.btn.secondary:active{background:#f1f5f9}
.btn.secondary:hover{background:#f8fafc}
.btn.secondary:focus-visible{outline:2px solid var(--brand);outline-offset:2px}
.btn.ghost{background:transparent;border:1px dashed #cbd5e1}
.btn.success{background:#16a34a;color:#fff}
.hint{font-size:12px;color:var(--muted);margin-top:8px}
.chips{display:flex;gap:8px;flex-wrap:wrap}
.result{margin-top:10px;padding:12px 14px;border-radius:14px;background:rgba(241,245,249,var(--background-opacity));display:none}
.result.visible{display:block} .score{font-weight:800}
.result-badge{display:inline-flex;align-items:center;gap:8px;margin-left:12px}
.badge{font-size:12px;padding:6px 8px;border-radius:999px;color:#fff;font-weight:700}
.badge-real{background:#16a34a}
.badge-simulated{background:#f97316}
.mistake{display:inline-block;padding:6px 10px;border-radius:999px;background:#fee2e2;color:#991b1b;margin-right:8px;font-size:12px}
.summary{display:none} .summary.visible{display:block}
.summary .grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
.kpi{padding:14px;border-radius:14px;background:rgba(255,255,255,var(--background-opacity));box-shadow:var(--shadow)}
.tabbar{position:fixed;left:0;right:0;background:#ffffff !important;border-top:1px solid #e5e7eb;display:flex;box-sizing:border-box;
	/* anchor tabbar to the bottom, pad inside for the home indicator */
	bottom: 0;
	padding-bottom: env(safe-area-inset-bottom, 0px);
	height: calc(64px + env(safe-area-inset-bottom, 0px));
	z-index:30;
	/* be explicit for iOS PWAs which may apply translucency/backdrop by default */
	-webkit-backdrop-filter: none !important;
	backdrop-filter: none !important;
	background-image: none !important;
	background-color: #ffffff !important;
	box-shadow: 0 -6px 20px rgba(2,8,23,0.04);
}
/* Ensure tab icons are fully opaque and sized consistently */
.tab img{opacity:1;display:block;width:24px;height:auto;-webkit-filter:none;filter:none}
.tab{flex:1;display:grid;place-items:center;color:#475569;font-size:12px;cursor:pointer}
.tab.active{color:var(--brand);font-weight:700}
.spacer{height:74px} .row{display:flex;gap:10px;align-items:center} .right{margin-left:auto} .muted{color:var(--muted)} .hidden{display:none}

/* Pins / achievements grid */
.pins-grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:10px;margin-top:10px;align-items:stretch;justify-items:stretch}
.pins-grid .pin{background:rgba(255,255,255,var(--background-opacity));border-radius:10px;padding:6px;display:flex;align-items:center;justify-content:center;box-shadow:var(--shadow);aspect-ratio:1/1;overflow:hidden;width:100%;min-width:0;box-sizing:border-box}
.pins-grid .pin img{width:100%;height:100%;object-fit:contain;display:block}

/* Flexbox fallback: ensure 4 columns if grid is not applied */
.no-grid .pins-grid{display:flex;flex-wrap:wrap}
.no-grid .pins-grid .pin{flex:0 0 25%;max-width:25%}

/* High-specificity override for the pins container to force 4 columns */
#myPins{display:grid !important; grid-template-columns:repeat(4,minmax(0,1fr)) !important; gap:10px !important; align-items:stretch; justify-items:stretch}
#myPins .pin{width:100% !important; min-width:0 !important; box-sizing:border-box}

/* keep 4 columns on narrow/mobile screens explicitly */
@media (max-width: 480px) {
	.pins-grid{grid-template-columns:repeat(4,1fr);gap:8px}
	.pins-grid .pin img{height:100%;width:100%}
}

/* Keep main content above the tab bar and iOS home indicator */
#views{ padding-bottom: var(--tabbar-h); }

